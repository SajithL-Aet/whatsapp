{"ast":null,"code":"import axios from \"axios\";\nimport * as constants from \"../../../lib/constants\";\nimport { HTTP_CODE } from \"../../../lib/enums/httpData\";\nimport { ERROR_POPUP_MESSAGE } from \"../../../lib/properties/properties\";\nconst networkClient = headers => {\n  const axiosInstance = axios.create({\n    baseURL: process.env.REACT_APP_BASE_URL\n  });\n  axiosInstance.interceptors.request.use(config => {\n    if (headers) {\n      if (headers.token) {\n        config.headers[constants.HEADER_KEY_AUTHORIZATION] = headers.token;\n      }\n    }\n    config.headers[constants.HEADER_KEY_API_KEY] = process.env.REACT_APP_API_KEY;\n    config.headers[constants.HEADER_KEY_ACCEPT] = constants.HEADER_VAL_ACCEPT;\n    config.headers[constants.HEADER_KEY_PLATFORM] = constants.HEADER_VAL_PLATFORM;\n    return config;\n  }, error => {\n    return Promise.reject(error);\n  });\n  axiosInstance.interceptors.response.use(response => {\n    return response;\n  }, error => {\n    let icMessage = error.response.headers[\"ic-message\"];\n    if (error.response.status !== HTTP_CODE.BAD_REQUEST) {\n      icMessage = ERROR_POPUP_MESSAGE;\n    }\n    const icError = {\n      statusCode: error.response.status,\n      errorMessage: icMessage === undefined ? ERROR_POPUP_MESSAGE : icMessage,\n      externalErrorMessage: error.response.headers[\"ic-external-message\"]\n    };\n    return Promise.reject(icError);\n  });\n  return axiosInstance;\n};\nexport default networkClient;","map":{"version":3,"names":["axios","constants","HTTP_CODE","ERROR_POPUP_MESSAGE","networkClient","headers","axiosInstance","create","baseURL","process","env","REACT_APP_BASE_URL","interceptors","request","use","config","token","HEADER_KEY_AUTHORIZATION","HEADER_KEY_API_KEY","REACT_APP_API_KEY","HEADER_KEY_ACCEPT","HEADER_VAL_ACCEPT","HEADER_KEY_PLATFORM","HEADER_VAL_PLATFORM","error","Promise","reject","response","icMessage","status","BAD_REQUEST","icError","statusCode","errorMessage","undefined","externalErrorMessage"],"sources":["/Users/sajithliyanage/Documents/whatsapp/whatsapp/src/services/api/networkClient/index.js"],"sourcesContent":["import axios from \"axios\";\nimport * as constants from \"../../../lib/constants\";\nimport { HTTP_CODE } from \"../../../lib/enums/httpData\";\nimport { ERROR_POPUP_MESSAGE } from \"../../../lib/properties/properties\";\n\nconst networkClient = (headers) => {\n\n    const axiosInstance = axios.create({\n        baseURL: process.env.REACT_APP_BASE_URL\n    });\n\n    axiosInstance.interceptors.request.use(\n        config => {\n            if (headers) {\n                if (headers.token) {\n                    config.headers[constants.HEADER_KEY_AUTHORIZATION] = headers.token;\n                }\n            }\n            config.headers[constants.HEADER_KEY_API_KEY] = process.env.REACT_APP_API_KEY;\n            config.headers[constants.HEADER_KEY_ACCEPT] = constants.HEADER_VAL_ACCEPT;\n            config.headers[constants.HEADER_KEY_PLATFORM] = constants.HEADER_VAL_PLATFORM;\n            return config;\n        }, error => {\n            return Promise.reject(error);\n        }\n    );\n\n    axiosInstance.interceptors.response.use(\n        response => {\n            return response;\n        }, error => {\n            let icMessage = error.response.headers[\"ic-message\"];\n            if (error.response.status !== HTTP_CODE.BAD_REQUEST) {\n                icMessage = ERROR_POPUP_MESSAGE;\n            }\n            const icError = {\n                statusCode: error.response.status,\n                errorMessage: icMessage === undefined ? ERROR_POPUP_MESSAGE : icMessage,\n                externalErrorMessage: error.response.headers[\"ic-external-message\"]\n            };\n            return Promise.reject(icError);\n        }\n    );\n\n\treturn axiosInstance;\n\n};\n\nexport default networkClient;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAO,KAAKC,SAAS,MAAM,wBAAwB;AACnD,SAASC,SAAS,QAAQ,6BAA6B;AACvD,SAASC,mBAAmB,QAAQ,oCAAoC;AAExE,MAAMC,aAAa,GAAIC,OAAO,IAAK;EAE/B,MAAMC,aAAa,GAAGN,KAAK,CAACO,MAAM,CAAC;IAC/BC,OAAO,EAAEC,OAAO,CAACC,GAAG,CAACC;EACzB,CAAC,CAAC;EAEFL,aAAa,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAClCC,MAAM,IAAI;IACN,IAAIV,OAAO,EAAE;MACT,IAAIA,OAAO,CAACW,KAAK,EAAE;QACfD,MAAM,CAACV,OAAO,CAACJ,SAAS,CAACgB,wBAAwB,CAAC,GAAGZ,OAAO,CAACW,KAAK;MACtE;IACJ;IACAD,MAAM,CAACV,OAAO,CAACJ,SAAS,CAACiB,kBAAkB,CAAC,GAAGT,OAAO,CAACC,GAAG,CAACS,iBAAiB;IAC5EJ,MAAM,CAACV,OAAO,CAACJ,SAAS,CAACmB,iBAAiB,CAAC,GAAGnB,SAAS,CAACoB,iBAAiB;IACzEN,MAAM,CAACV,OAAO,CAACJ,SAAS,CAACqB,mBAAmB,CAAC,GAAGrB,SAAS,CAACsB,mBAAmB;IAC7E,OAAOR,MAAM;EACjB,CAAC,EAAES,KAAK,IAAI;IACR,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;EAChC,CACJ,CAAC;EAEDlB,aAAa,CAACM,YAAY,CAACe,QAAQ,CAACb,GAAG,CACnCa,QAAQ,IAAI;IACR,OAAOA,QAAQ;EACnB,CAAC,EAAEH,KAAK,IAAI;IACR,IAAII,SAAS,GAAGJ,KAAK,CAACG,QAAQ,CAACtB,OAAO,CAAC,YAAY,CAAC;IACpD,IAAImB,KAAK,CAACG,QAAQ,CAACE,MAAM,KAAK3B,SAAS,CAAC4B,WAAW,EAAE;MACjDF,SAAS,GAAGzB,mBAAmB;IACnC;IACA,MAAM4B,OAAO,GAAG;MACZC,UAAU,EAAER,KAAK,CAACG,QAAQ,CAACE,MAAM;MACjCI,YAAY,EAAEL,SAAS,KAAKM,SAAS,GAAG/B,mBAAmB,GAAGyB,SAAS;MACvEO,oBAAoB,EAAEX,KAAK,CAACG,QAAQ,CAACtB,OAAO,CAAC,qBAAqB;IACtE,CAAC;IACD,OAAOoB,OAAO,CAACC,MAAM,CAACK,OAAO,CAAC;EAClC,CACJ,CAAC;EAEJ,OAAOzB,aAAa;AAErB,CAAC;AAED,eAAeF,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}